/*
 * -------------------------------------------------
 *  University of Hawaii at Manoa cluster config file
 * -------------------------------------------------
 * 
 */

params {
  script_dir = "/workspace"
}

env{
  PYTHONPATH = params.script_dir + ":${PWD}/python-packages/:${PYTHONPATH}"
}

executor{
  jobName = { "$task.tag" }
  queueSize = 4
}

docker {
   enabled = true
   sudo = true
}

cloud {
      driver = 'google'
}

google {
       project = 'c-maiki-pipelines'
       zone = 'us-west2-a,us-west2-b'
}

process {
    executor = 'google-pipelines'
    stageInMode = 'rellink'
    stageOutMode = 'rsync'
	container = 'nakor/pipeline-env'

    withLabel: low_computation {
	  machineType = 'n1-highmem-2'
    }
    withLabel: medium_computation {
	  machineType = 'n1-highmem-4'
    }
    withLabel: high_computation {
	  machineType = 'n1-highmem-8'
    }
}	