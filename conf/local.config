/*
 * -------------------------------------------------
 *  University of Hawaii at Manoa cluster config file
 * -------------------------------------------------
 *
 */

params {
  db_dir = "${PWD}/databases"
  script_dir = "${PWD}/scripts"

  referenceAln = db_dir + "/silva.nr_v132.align"
  referenceTax = db_dir + "/silva.full_v132.tax"
  uniteDB = db_dir + "/unite_all_eukaryotes.fasta"
}

env {
  PYTHONPATH = params.script_dir + ":${PYTHONPATH}"
  PATH = "${PATH}:${HOME}/.local/src/mothur_1-43"
}

executor{
  jobName = { "$task.tag" }
  queueSize = 20
}

tower {
  enabled = true
}

process {
    errorStrategy = 'terminate'
    maxRetries = 2
    executor = 'local'
    stageInMode = 'rellink'
    stageOutMode = 'move'

    withLabel: low_computation {
        cpus = 4
        memory = 16.GB
        time = '1h'
    }

    withLabel: medium_computation {
        cpus = 8
        memory = 32.GB
        time = '1d'
    }

    withLabel: high_computation {
        cpus = 20
        memory = 90.GB
        time = '3d'
    }
}

